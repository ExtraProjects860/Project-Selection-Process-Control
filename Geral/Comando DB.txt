CREATE TABLE Usuario (
id_usuario INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
email VARCHAR(50) UNIQUE NOT NULL,
senha VARCHAR(255) NOT NULL,
admin BOOLEAN NOT NULL,
tokenForgotPassword VARCHAR(255),
tokenTimeValid TIMESTAMP,
data_criacao TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Dados_Usuario (
id_dados_usuario INT PRIMARY KEY NOT NULL,
nome_usuario VARCHAR(50) NOT NULL,
curriculo VARCHAR(50),
cpf VARCHAR(15) UNIQUE NOT NULL,
telefone VARCHAR(15) NOT NULL,
endereco VARCHAR(125) NOT NULL,
data_nascimento DATE NOT NULL,
sexo CHAR(1) NOT NULL,
FOREIGN KEY (id_dados_usuario) REFERENCES Usuario(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Inscricao (
id_usuario INT NOT NULL,
id_vaga INT NOT NULL,
data_inscricao TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
FOREIGN KEY (id_usuario) REFERENCES Usuario(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (id_vaga) REFERENCES Vaga(id_vaga) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Setor (
id_setor INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
nome_setor VARCHAR(50) UNIQUE NOT NULL
);

CREATE TABLE Cargo (
id_cargo INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
nome_cargo VARCHAR(50) UNIQUE NOT NULL
);

CREATE TABLE Vaga (
id_vaga INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
id_setor INT NOT NULL,
id_cargo INT NOT NULL,
nome_vaga VARCHAR(50) UNIQUE NOT NULL,
status ENUM('ABERTA', 'FECHADA') NOT NULL,
descricao_vaga TEXT NOT NULL,
salario FLOAT NOT NULL,
quantidade_vagas INT NOT NULL,
data_abertura DATE NOT NULL DEFAULT (CURRENT_DATE),
data_encerramento DATE NOT NULL,
FOREIGN KEY (id_setor) REFERENCES Setor(id_setor) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (id_cargo) REFERENCES Cargo(id_cargo) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Etapa (
id_etapa INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
nome_etapa VARCHAR(25) UNIQUE NOT NULL
);

CREATE TABLE Status_Processo_Seletivo (
id_status_processo_seletivo INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
id_vaga INT NOT NULL,
id_etapa INT NOT NULL,
data_entrevista TIMESTAMP,
data_conclusao TIMESTAMP,
status_processo VARCHAR(25), ('EM ANDAMENTO', 'ATIVO', 'BANCO DE TALENTOS', 'CONCLUÍDO', 'DESISTÊNCIA', 'REPROVAÇÃO', 'ENCERRADO')
perfil VARCHAR(25),
observacao TEXT,
forms_respondido BOOLEAN,
avaliacao_forms ENUM('IDEAL', 'MEDIANO', 'RUIM'),
FOREIGN KEY (id_vaga) REFERENCES Vaga(id_vaga) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (id_etapa) REFERENCES Etapa(id_etapa) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Links_Forms (
id_links_forms INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
nome_cargo VARCHAR(50) UNIQUE NOT NULL,
link TEXT NOT NULL
);

CREATE TABLE Token_Blacklist (
id_token_blacklist INT PRIMARY KEY AUTO_INCREMENT,
jti VARCHAR(191) UNIQUE NOT NULL,
revogado BOOLEAN NOT NULL DEFAULT TRUE,
data_criacao TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

